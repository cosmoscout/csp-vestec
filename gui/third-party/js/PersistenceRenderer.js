!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("noUiSlider")):"function"==typeof define&&define.amd?define("PersistenceRenderer",["noUiSlider"],e):"object"==typeof exports?exports.PersistenceRenderer=e(require("noUiSlider")):t.PersistenceRenderer=e(t.noUiSlider)}(self,(function(t){return(()=>{var e={9662:(t,e,n)=>{var i=n(614),r=n(6330);t.exports=function(t){if(i(t))return t;throw TypeError(r(t)+" is not a function")}},9483:(t,e,n)=>{var i=n(4411),r=n(6330);t.exports=function(t){if(i(t))return t;throw TypeError(r(t)+" is not a constructor")}},6077:(t,e,n)=>{var i=n(614);t.exports=function(t){if("object"==typeof t||i(t))return t;throw TypeError("Can't set "+String(t)+" as a prototype")}},5787:t=>{t.exports=function(t,e,n){if(t instanceof e)return t;throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}},9670:(t,e,n)=>{var i=n(111);t.exports=function(t){if(i(t))return t;throw TypeError(String(t)+" is not an object")}},1318:(t,e,n)=>{var i=n(5656),r=n(1400),o=n(6244),s=function(t){return function(e,n,s){var a,c=i(e),u=o(c),l=r(s,u);if(t&&n!=n){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},7072:(t,e,n)=>{var i=n(5112)("iterator"),r=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){r=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},4326:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},648:(t,e,n)=>{var i=n(1694),r=n(614),o=n(4326),s=n(5112)("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=i?o:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),s))?n:a?o(e):"Object"==(i=o(e))&&r(e.callee)?"Arguments":i}},9920:(t,e,n)=>{var i=n(2597),r=n(3887),o=n(1236),s=n(3070);t.exports=function(t,e){for(var n=r(e),a=s.f,c=o.f,u=0;u<n.length;u++){var l=n[u];i(t,l)||a(t,l,c(e,l))}}},8880:(t,e,n)=>{var i=n(9781),r=n(3070),o=n(9114);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9114:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},9781:(t,e,n)=>{var i=n(7293);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(t,e,n)=>{var i=n(7854),r=n(111),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},7871:t=>{t.exports="object"==typeof window},1528:(t,e,n)=>{var i=n(8113),r=n(7854);t.exports=/ipad|iphone|ipod/i.test(i)&&void 0!==r.Pebble},6833:(t,e,n)=>{var i=n(8113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},5268:(t,e,n)=>{var i=n(4326),r=n(7854);t.exports="process"==i(r.process)},1036:(t,e,n)=>{var i=n(8113);t.exports=/web0s(?!.*chrome)/i.test(i)},8113:(t,e,n)=>{var i=n(5005);t.exports=i("navigator","userAgent")||""},7392:(t,e,n)=>{var i,r,o=n(7854),s=n(8113),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l?r=(i=l.split("."))[0]<4?1:i[0]+i[1]:s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=i[1]),t.exports=r&&+r},748:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(t,e,n)=>{var i=n(7854),r=n(1236).f,o=n(8880),s=n(1320),a=n(3505),c=n(9920),u=n(4705);t.exports=function(t,e){var n,l,h,d,f,p=t.target,v=t.global,g=t.stat;if(n=v?i:g?i[p]||a(p,{}):(i[p]||{}).prototype)for(l in e){if(d=e[l],h=t.noTargetGet?(f=r(n,l))&&f.value:n[l],!u(v?l:p+(g?".":"#")+l,t.forced)&&void 0!==h){if(typeof d==typeof h)continue;c(d,h)}(t.sham||h&&h.sham)&&o(d,"sham",!0),s(n,l,d,t)}}},7293:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},9974:(t,e,n)=>{var i=n(9662);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},6530:(t,e,n)=>{var i=n(9781),r=n(2597),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=r(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!i||i&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},5005:(t,e,n)=>{var i=n(7854),r=n(614),o=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(i[t]):i[t]&&i[t][e]}},1246:(t,e,n)=>{var i=n(648),r=n(8173),o=n(7497),s=n(5112)("iterator");t.exports=function(t){if(null!=t)return r(t,s)||r(t,"@@iterator")||o[i(t)]}},8554:(t,e,n)=>{var i=n(9662),r=n(9670),o=n(1246);t.exports=function(t,e){var n=arguments.length<2?o(t):e;if(i(n))return r(n.call(t));throw TypeError(String(t)+" is not iterable")}},8173:(t,e,n)=>{var i=n(9662);t.exports=function(t,e){var n=t[e];return null==n?void 0:i(n)}},7854:(t,e,n)=>{var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:(t,e,n)=>{var i=n(7908),r={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return r.call(i(t),e)}},3501:t=>{t.exports={}},842:(t,e,n)=>{var i=n(7854);t.exports=function(t,e){var n=i.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},490:(t,e,n)=>{var i=n(5005);t.exports=i("document","documentElement")},4664:(t,e,n)=>{var i=n(9781),r=n(7293),o=n(317);t.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:(t,e,n)=>{var i=n(7293),r=n(4326),o="".split;t.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?o.call(t,""):Object(t)}:Object},2788:(t,e,n)=>{var i=n(614),r=n(5465),o=Function.toString;i(r.inspectSource)||(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource},9909:(t,e,n)=>{var i,r,o,s=n(8536),a=n(7854),c=n(111),u=n(8880),l=n(2597),h=n(5465),d=n(6200),f=n(3501),p="Object already initialized",v=a.WeakMap;if(s||h.state){var g=h.state||(h.state=new v),x=g.get,m=g.has,y=g.set;i=function(t,e){if(m.call(g,t))throw new TypeError(p);return e.facade=t,y.call(g,t,e),e},r=function(t){return x.call(g,t)||{}},o=function(t){return m.call(g,t)}}else{var b=d("state");f[b]=!0,i=function(t,e){if(l(t,b))throw new TypeError(p);return e.facade=t,u(t,b,e),e},r=function(t){return l(t,b)?t[b]:{}},o=function(t){return l(t,b)}}t.exports={set:i,get:r,has:o,enforce:function(t){return o(t)?r(t):i(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},7659:(t,e,n)=>{var i=n(5112),r=n(7497),o=i("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[o]===t)}},614:t=>{t.exports=function(t){return"function"==typeof t}},4411:(t,e,n)=>{var i=n(7293),r=n(614),o=n(648),s=n(5005),a=n(2788),c=[],u=s("Reflect","construct"),l=/^\s*(?:class|function)\b/,h=l.exec,d=!l.exec((function(){})),f=function(t){if(!r(t))return!1;try{return u(Object,c,t),!0}catch(t){return!1}};t.exports=!u||i((function(){var t;return f(f.call)||!f(Object)||!f((function(){t=!0}))||t}))?function(t){if(!r(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return d||!!h.call(l,a(t))}:f},4705:(t,e,n)=>{var i=n(7293),r=n(614),o=/#|\.prototype\./,s=function(t,e){var n=c[a(t)];return n==l||n!=u&&(r(e)?i(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s},111:(t,e,n)=>{var i=n(614);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},1913:t=>{t.exports=!1},2190:(t,e,n)=>{var i=n(614),r=n(5005),o=n(3307);t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&Object(t)instanceof e}},408:(t,e,n)=>{var i=n(9670),r=n(7659),o=n(6244),s=n(9974),a=n(8554),c=n(1246),u=n(9212),l=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var h,d,f,p,v,g,x,m=n&&n.that,y=!(!n||!n.AS_ENTRIES),b=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),P=s(e,m,1+y+w),D=function(t){return h&&u(h,"normal",t),new l(!0,t)},S=function(t){return y?(i(t),w?P(t[0],t[1],D):P(t[0],t[1])):w?P(t,D):P(t)};if(b)h=t;else{if(!(d=c(t)))throw TypeError(String(t)+" is not iterable");if(r(d)){for(f=0,p=o(t);p>f;f++)if((v=S(t[f]))&&v instanceof l)return v;return new l(!1)}h=a(t,d)}for(g=h.next;!(x=g.call(h)).done;){try{v=S(x.value)}catch(t){u(h,"throw",t)}if("object"==typeof v&&v&&v instanceof l)return v}return new l(!1)}},9212:(t,e,n)=>{var i=n(9670),r=n(8173);t.exports=function(t,e,n){var o,s;i(t);try{if(!(o=r(t,"return"))){if("throw"===e)throw n;return n}o=o.call(t)}catch(t){s=!0,o=t}if("throw"===e)throw n;if(s)throw o;return i(o),n}},7497:t=>{t.exports={}},6244:(t,e,n)=>{var i=n(7466);t.exports=function(t){return i(t.length)}},5948:(t,e,n)=>{var i,r,o,s,a,c,u,l,h=n(7854),d=n(1236).f,f=n(261).set,p=n(6833),v=n(1528),g=n(1036),x=n(5268),m=h.MutationObserver||h.WebKitMutationObserver,y=h.document,b=h.process,w=h.Promise,P=d(h,"queueMicrotask"),D=P&&P.value;D||(i=function(){var t,e;for(x&&(t=b.domain)&&t.exit();r;){e=r.fn,r=r.next;try{e()}catch(t){throw r?s():o=void 0,t}}o=void 0,t&&t.enter()},p||x||g||!m||!y?!v&&w&&w.resolve?((u=w.resolve(void 0)).constructor=w,l=u.then,s=function(){l.call(u,i)}):s=x?function(){b.nextTick(i)}:function(){f.call(h,i)}:(a=!0,c=y.createTextNode(""),new m(i).observe(c,{characterData:!0}),s=function(){c.data=a=!a})),t.exports=D||function(t){var e={fn:t,next:void 0};o&&(o.next=e),r||(r=e,s()),o=e}},3366:(t,e,n)=>{var i=n(7854);t.exports=i.Promise},133:(t,e,n)=>{var i=n(7392),r=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},8536:(t,e,n)=>{var i=n(7854),r=n(614),o=n(2788),s=i.WeakMap;t.exports=r(s)&&/native code/.test(o(s))},8523:(t,e,n)=>{"use strict";var i=n(9662),r=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=i(e),this.reject=i(n)};t.exports.f=function(t){return new r(t)}},3070:(t,e,n)=>{var i=n(9781),r=n(4664),o=n(9670),s=n(4948),a=Object.defineProperty;e.f=i?a:function(t,e,n){if(o(t),e=s(e),o(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:(t,e,n)=>{var i=n(9781),r=n(5296),o=n(9114),s=n(5656),a=n(4948),c=n(2597),u=n(4664),l=Object.getOwnPropertyDescriptor;e.f=i?l:function(t,e){if(t=s(t),e=a(e),u)try{return l(t,e)}catch(t){}if(c(t,e))return o(!r.f.call(t,e),t[e])}},8006:(t,e,n)=>{var i=n(6324),r=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},5181:(t,e)=>{e.f=Object.getOwnPropertySymbols},6324:(t,e,n)=>{var i=n(2597),r=n(5656),o=n(1318).indexOf,s=n(3501);t.exports=function(t,e){var n,a=r(t),c=0,u=[];for(n in a)!i(s,n)&&i(a,n)&&u.push(n);for(;e.length>c;)i(a,n=e[c++])&&(~o(u,n)||u.push(n));return u}},5296:(t,e)=>{"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},7674:(t,e,n)=>{var i=n(9670),r=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return i(n),r(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},2140:(t,e,n)=>{var i=n(614),r=n(111);t.exports=function(t,e){var n,o;if("string"===e&&i(n=t.toString)&&!r(o=n.call(t)))return o;if(i(n=t.valueOf)&&!r(o=n.call(t)))return o;if("string"!==e&&i(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},3887:(t,e,n)=>{var i=n(5005),r=n(8006),o=n(5181),s=n(9670);t.exports=i("Reflect","ownKeys")||function(t){var e=r.f(s(t)),n=o.f;return n?e.concat(n(t)):e}},2534:t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},9478:(t,e,n)=>{var i=n(9670),r=n(111),o=n(8523);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},2248:(t,e,n)=>{var i=n(1320);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},1320:(t,e,n)=>{var i=n(7854),r=n(614),o=n(2597),s=n(8880),a=n(3505),c=n(2788),u=n(9909),l=n(6530).CONFIGURABLE,h=u.get,d=u.enforce,f=String(String).split("String");(t.exports=function(t,e,n,c){var u,h=!!c&&!!c.unsafe,p=!!c&&!!c.enumerable,v=!!c&&!!c.noTargetGet,g=c&&void 0!==c.name?c.name:e;r(n)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||l&&n.name!==g)&&s(n,"name",g),(u=d(n)).source||(u.source=f.join("string"==typeof g?g:""))),t!==i?(h?!v&&t[e]&&(p=!0):delete t[e],p?t[e]=n:s(t,e,n)):p?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return r(this)&&h(this).source||c(this)}))},4488:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},3505:(t,e,n)=>{var i=n(7854);t.exports=function(t,e){try{Object.defineProperty(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},6340:(t,e,n)=>{"use strict";var i=n(5005),r=n(3070),o=n(5112),s=n(9781),a=o("species");t.exports=function(t){var e=i(t),n=r.f;s&&e&&!e[a]&&n(e,a,{configurable:!0,get:function(){return this}})}},8003:(t,e,n)=>{var i=n(3070).f,r=n(2597),o=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},6200:(t,e,n)=>{var i=n(2309),r=n(9711),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},5465:(t,e,n)=>{var i=n(7854),r=n(3505),o="__core-js_shared__",s=i[o]||r(o,{});t.exports=s},2309:(t,e,n)=>{var i=n(1913),r=n(5465);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.18.2",mode:i?"pure":"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})},6707:(t,e,n)=>{var i=n(9670),r=n(9483),o=n(5112)("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||null==(n=i(s)[o])?e:r(n)}},261:(t,e,n)=>{var i,r,o,s,a=n(7854),c=n(614),u=n(7293),l=n(9974),h=n(490),d=n(317),f=n(6833),p=n(5268),v=a.setImmediate,g=a.clearImmediate,x=a.process,m=a.MessageChannel,y=a.Dispatch,b=0,w={};try{i=a.location}catch(t){}var P=function(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}},D=function(t){return function(){P(t)}},S=function(t){P(t.data)},T=function(t){a.postMessage(String(t),i.protocol+"//"+i.host)};v&&g||(v=function(t){for(var e=[],n=arguments.length,i=1;n>i;)e.push(arguments[i++]);return w[++b]=function(){(c(t)?t:Function(t)).apply(void 0,e)},r(b),b},g=function(t){delete w[t]},p?r=function(t){x.nextTick(D(t))}:y&&y.now?r=function(t){y.now(D(t))}:m&&!f?(s=(o=new m).port2,o.port1.onmessage=S,r=l(s.postMessage,s,1)):a.addEventListener&&c(a.postMessage)&&!a.importScripts&&i&&"file:"!==i.protocol&&!u(T)?(r=T,a.addEventListener("message",S,!1)):r="onreadystatechange"in d("script")?function(t){h.appendChild(d("script")).onreadystatechange=function(){h.removeChild(this),P(t)}}:function(t){setTimeout(D(t),0)}),t.exports={set:v,clear:g}},1400:(t,e,n)=>{var i=n(9303),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},5656:(t,e,n)=>{var i=n(8361),r=n(4488);t.exports=function(t){return i(r(t))}},9303:t=>{var e=Math.ceil,n=Math.floor;t.exports=function(t){var i=+t;return i!=i||0===i?0:(i>0?n:e)(i)}},7466:(t,e,n)=>{var i=n(9303),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},7908:(t,e,n)=>{var i=n(4488);t.exports=function(t){return Object(i(t))}},7593:(t,e,n)=>{var i=n(111),r=n(2190),o=n(8173),s=n(2140),a=n(5112)("toPrimitive");t.exports=function(t,e){if(!i(t)||r(t))return t;var n,c=o(t,a);if(c){if(void 0===e&&(e="default"),n=c.call(t,e),!i(n)||r(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},4948:(t,e,n)=>{var i=n(7593),r=n(2190);t.exports=function(t){var e=i(t,"string");return r(e)?e:String(e)}},1694:(t,e,n)=>{var i={};i[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(i)},6330:t=>{t.exports=function(t){try{return String(t)}catch(t){return"Object"}}},9711:t=>{var e=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+n).toString(36)}},3307:(t,e,n)=>{var i=n(133);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:(t,e,n)=>{var i=n(7854),r=n(2309),o=n(2597),s=n(9711),a=n(133),c=n(3307),u=r("wks"),l=i.Symbol,h=c?l:l&&l.withoutSetter||s;t.exports=function(t){return o(u,t)&&(a||"string"==typeof u[t])||(a&&o(l,t)?u[t]=l[t]:u[t]=h("Symbol."+t)),u[t]}},8674:(t,e,n)=>{"use strict";var i,r,o,s,a=n(2109),c=n(1913),u=n(7854),l=n(5005),h=n(3366),d=n(1320),f=n(2248),p=n(7674),v=n(8003),g=n(6340),x=n(9662),m=n(614),y=n(111),b=n(5787),w=n(2788),P=n(408),D=n(7072),S=n(6707),T=n(261).set,E=n(5948),I=n(9478),_=n(842),C=n(8523),j=n(2534),B=n(9909),O=n(4705),N=n(5112),M=n(7871),k=n(5268),F=n(7392),L=N("species"),A="Promise",U=B.get,R=B.set,Y=B.getterFor(A),V=h&&h.prototype,G=h,$=V,z=u.TypeError,W=u.document,H=u.process,q=C.f,X=q,K=!!(W&&W.createEvent&&u.dispatchEvent),J=m(u.PromiseRejectionEvent),Q="unhandledrejection",Z=!1,tt=O(A,(function(){var t=w(G),e=t!==String(G);if(!e&&66===F)return!0;if(c&&!$.finally)return!0;if(F>=51&&/native code/.test(t))return!1;var n=new G((function(t){t(1)})),i=function(t){t((function(){}),(function(){}))};return(n.constructor={})[L]=i,!(Z=n.then((function(){}))instanceof i)||!e&&M&&!J})),et=tt||!D((function(t){G.all(t).catch((function(){}))})),nt=function(t){var e;return!(!y(t)||!m(e=t.then))&&e},it=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;E((function(){for(var i=t.value,r=1==t.state,o=0;n.length>o;){var s,a,c,u=n[o++],l=r?u.ok:u.fail,h=u.resolve,d=u.reject,f=u.domain;try{l?(r||(2===t.rejection&&at(t),t.rejection=1),!0===l?s=i:(f&&f.enter(),s=l(i),f&&(f.exit(),c=!0)),s===u.promise?d(z("Promise-chain cycle")):(a=nt(s))?a.call(s,h,d):h(s)):d(i)}catch(t){f&&!c&&f.exit(),d(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&ot(t)}))}},rt=function(t,e,n){var i,r;K?((i=W.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),u.dispatchEvent(i)):i={promise:e,reason:n},!J&&(r=u["on"+t])?r(i):t===Q&&_("Unhandled promise rejection",n)},ot=function(t){T.call(u,(function(){var e,n=t.facade,i=t.value;if(st(t)&&(e=j((function(){k?H.emit("unhandledRejection",i,n):rt(Q,n,i)})),t.rejection=k||st(t)?2:1,e.error))throw e.value}))},st=function(t){return 1!==t.rejection&&!t.parent},at=function(t){T.call(u,(function(){var e=t.facade;k?H.emit("rejectionHandled",e):rt("rejectionhandled",e,t.value)}))},ct=function(t,e,n){return function(i){t(e,i,n)}},ut=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,it(t,!0))},lt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw z("Promise can't be resolved itself");var i=nt(e);i?E((function(){var n={done:!1};try{i.call(e,ct(lt,n,t),ct(ut,n,t))}catch(e){ut(n,e,t)}})):(t.value=e,t.state=1,it(t,!1))}catch(e){ut({done:!1},e,t)}}};if(tt&&($=(G=function(t){b(this,G,A),x(t),i.call(this);var e=U(this);try{t(ct(lt,e),ct(ut,e))}catch(t){ut(e,t)}}).prototype,(i=function(t){R(this,{type:A,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f($,{then:function(t,e){var n=Y(this),i=q(S(this,G));return i.ok=!m(t)||t,i.fail=m(e)&&e,i.domain=k?H.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&it(n,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new i,e=U(t);this.promise=t,this.resolve=ct(lt,e),this.reject=ct(ut,e)},C.f=q=function(t){return t===G||t===o?new r(t):X(t)},!c&&m(h)&&V!==Object.prototype)){s=V.then,Z||(d(V,"then",(function(t,e){var n=this;return new G((function(t,e){s.call(n,t,e)})).then(t,e)}),{unsafe:!0}),d(V,"catch",$.catch,{unsafe:!0}));try{delete V.constructor}catch(t){}p&&p(V,$)}a({global:!0,wrap:!0,forced:tt},{Promise:G}),v(G,A,!1,!0),g(A),o=l(A),a({target:A,stat:!0,forced:tt},{reject:function(t){var e=q(this);return e.reject.call(void 0,t),e.promise}}),a({target:A,stat:!0,forced:c||tt},{resolve:function(t){return I(c&&this===o?G:this,t)}}),a({target:A,stat:!0,forced:et},{all:function(t){var e=this,n=q(e),i=n.resolve,r=n.reject,o=j((function(){var n=x(e.resolve),o=[],s=0,a=1;P(t,(function(t){var c=s++,u=!1;o.push(void 0),a++,n.call(e,t).then((function(t){u||(u=!0,o[c]=t,--a||i(o))}),r)})),--a||i(o)}));return o.error&&r(o.value),n.promise},race:function(t){var e=this,n=q(e),i=n.reject,r=j((function(){var r=x(e.resolve);P(t,(function(t){r.call(e,t).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}})},8732:e=>{"use strict";e.exports=t}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var o=n[t]={exports:{}};return e[t](o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};return(()=>{"use strict";function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}i.d(r,{default:()=>D}),i(8674);class e{constructor(e,n,i,r){t(this,"persistence",void 0),t(this,"criticalType",void 0),t(this,"coordinates",void 0),t(this,"lower",void 0),t(this,"upper",void 0),this.lower=e,this.upper=n,this.criticalType=i,this.coordinates=r,this.persistence=n.y-e.y}}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class o{constructor(t={enableArray:!0,fetchGzip:!1}){if(n(this,"settings",void 0),n(this,"reader",void 0),n(this,"rawPointData",void 0),n(this,"criticalTypeData",void 0),n(this,"coordinateData",void 0),void 0===window.vtk)throw new Error("VTK.js is required.");this.settings=t,this.reader=window.vtk.IO.Core.vtkHttpDataSetReader.newInstance(this.settings)}getReader(){return this.reader}load(t){return new Promise(((e,n)=>{this.reader.setUrl(t).then((i=>{i.loadData().then((()=>{const n=i.getOutputData().getPoints().getData(),r=i.getOutputData().getPointData();if(n.length%3!=0)throw new Error("Number of points not dividable by 3.");this.rawPointData=n,this.criticalTypeData=r.getArray("CriticalType").getData(),this.coordinateData=r.getArray("Coordinates").getData();const o=[];let s=0;for(let t=0;t<n.length;t+=6)o.push(this.createPointTuple(t,s)),s+=2;console.info(`VKT data for file ${t} loaded.`),e({points:o,bounds:i.getOutputData().getBounds(),persistenceBounds:o.reduce(((t,e)=>(t.min=0===t.min||e.persistence<t.min?e.persistence:t.min,t.max=0===t.max||e.persistence>t.max?e.persistence:t.max,t)),{min:0,max:0})})})).catch((t=>{n(new Error(`Loader Error: ${t}.`))}))})).catch((()=>{n(new Error(`Could not access data at ${t}.`))}))}))}createPointTuple(t,n){if(void 0===this.rawPointData||void 0===this.coordinateData||void 0===this.criticalTypeData)throw new Error("Can't create PersistencePointTuple from undefined data.");const i={x:this.rawPointData[t],y:this.rawPointData[t+1],z:this.rawPointData[t+2]},r={x:this.rawPointData[t+3],y:this.rawPointData[t+4],z:this.rawPointData[t+5]},o={lower:this.criticalTypeData[n],upper:this.criticalTypeData[n+1]},s={lower:{x:this.coordinateData[t],y:this.coordinateData[t+1],z:this.coordinateData[t+2]},upper:{x:this.coordinateData[t+3],y:this.coordinateData[t+4],z:this.coordinateData[t+5]}};return new e(i,r,o,s)}}let s;!function(t){t.DataLoaded="dataloaded",t.SelectionStart="selectionstart",t.SelectionUpdating="selectionupdating",t.SelectionCleared="selectioncleared",t.SelectionEnd="selectionend",t.SliderDestroyed="sliderdestroyed",t.SliderCreated="slidercreated",t.PersistenceBoundsUpdating="persistenceboundsupdating",t.PersistenceBoundsSet="persistenceboundsset",t.PointsDrawn="pointsdrawn",t.PointsCleared="pointscleared"}(s||(s={}));class a{constructor(t){var e,n;n=void 0,(e="target")in this?Object.defineProperty(this,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[e]=n,this.target=t}dispatch(t,e){let n;n=void 0!==e?new CustomEvent(t,{detail:e}):new Event(t),this.target.dispatchEvent(n)}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class u{constructor(t){c(this,"id",void 0),c(this,"events",void 0),c(this,"controlData",void 0),c(this,"pointData",void 0),this.id=t.id,this.events=t.events,this.controlData=t,this.pointData=t}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class h extends u{constructor(...t){super(...t),l(this,"element",void 0),l(this,"_context",void 0),l(this,"defaultDrawFunction",((t,e)=>{e.getContext().beginPath(),e.getContext().moveTo(e.xPos(t.lower.x),e.yPos(t.lower.y)),e.getContext().lineTo(e.xPos(t.upper.x),e.yPos(t.upper.y)),e.getContext().stroke()})),l(this,"waitFor",(t=>new Promise((e=>setTimeout(e,t)))))}update(t){return this.pointData=t,this.draw()}init(){this.createElement()}getContext(){if(void 0===this._context)throw new Error("Canvas context is undefined");return this._context}getElement(){return this.element}getCanvas(){return this.getElement()}xPos(t){return(t-this.pointData.xMinFiltered())/(this.pointData.xMaxFiltered()-this.pointData.xMinFiltered())*(this.rangeXMax-this.rangeXMin)+this.rangeXMin}yPos(t){return(t-this.pointData.yMin())/(this.pointData.yMax()-this.pointData.yMin())*(this.rangeYMax-this.rangeYMin)+this.rangeYMin}createElement(){const t=document.createElement("canvas");t.id=`persistence_canvas_${this.id}`,t.classList.add("persistence_canvas"),t.width=this.controlData.settings.canvasWidth,t.height=this.controlData.settings.canvasHeight;const e=t.getContext("2d");e.strokeStyle=this.controlData.settings.strokeStyle,this.element=t,this._context=e}draw(){const t=this.pointData.filteredPointsChunked();if(this.getContext().clearRect(0,0,this.controlData.settings.canvasWidth,this.controlData.settings.canvasHeight),0===t.length)return Promise.reject(new Error("Points empty"));this.events.dispatch(s.PointsCleared),this.drawPersistenceLine();const e=[];t.forEach(((n,i)=>{console.debug(`Drawing point chunk ${i+1} / ${t.length}`),e.push(this.drawPoints(n,i))}));const n=Promise.all(e);return n.then((()=>{this.events.dispatch(s.PointsDrawn)})),n}getPointDrawFunction(){return void 0!==this.controlData.settings.pointDrawFunction?this.controlData.settings.pointDrawFunction:this.defaultDrawFunction}async drawPoints(t,e){await this.waitFor(this.controlData.settings.waitTime*e),t.forEach((t=>this.getPointDrawFunction()(t,this)))}drawPersistenceLine(){if(0===this.pointData.points.length)throw new Error("Can't draw persistence line without points.");const t=this.pointData.filteredPoints().sort(((t,e)=>t.lower.x-e.lower.x)),e=t[0],n=t[t.length-1];this.getContext().beginPath(),this.getContext().moveTo(this.xPos(e.lower.x),this.yPos(e.lower.y)),this.getContext().lineTo(this.xPos(n.lower.x),this.yPos(n.lower.y)),this.getContext().stroke()}get rangeXMin(){return this.controlData.settings.getPadding("left")}get rangeXMax(){return this.controlData.settings.canvasWidth-this.controlData.settings.getPadding("right")}get rangeYMin(){return this.controlData.settings.canvasHeight-this.controlData.settings.getPadding("bottom")}get rangeYMax(){return this.controlData.settings.getPadding("top")}}var d=i(8732),f=i.n(d);function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class v{constructor(t,e,n){p(this,"min",void 0),p(this,"max",void 0),p(this,"width",void 0),this.min=t,this.max=e,this.width=void 0!==n?n:e-t}equals(t){return this.min===t.min&&this.max===t.max&&this.width===t.width}toString(){return`Min: ${this.min} | Max: ${this.max} | Width: ${this.width}`}}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class x extends u{constructor(...t){super(...t),g(this,"element",void 0),g(this,"selectedPersistenceBounds",void 0),g(this,"noUiSlider",void 0)}getElement(){return this.element}init(){this.createElement()}update(t){if(void 0!==this.selectedPersistenceBounds&&this.selectedPersistenceBounds.equals(t.activePersistenceBounds))return;this.pointData=t;const{element:e}=this;void 0!==this.noUiSlider&&(this.noUiSlider.destroy(),this.selectedPersistenceBounds=void 0,this.events.dispatch(s.SliderDestroyed)),f().create(e,{start:[t.persistenceBounds.min,t.persistenceBounds.max],snap:!1,connect:!0,tooltips:!0,range:t.persistenceBounds}),this.events.dispatch(s.SliderCreated),this.noUiSlider=e.noUiSlider,this.addListener()}createElement(){if(void 0===window.noUiSlider)throw new Error("noUiSlider is required");const t=document.createElement("div");t.id=`persistence_slider_${this.id}`,t.classList.add("persistence_slider"),this.element=t}addListener(){void 0!==this.noUiSlider?(this.noUiSlider.on("update",(t=>{this.selectedPersistenceBounds=new v(t[0],t[1]),this.events.dispatch(s.PersistenceBoundsUpdating,this.selectedPersistenceBounds)})),this.noUiSlider.on("set",(t=>{this.selectedPersistenceBounds=new v(t[0],t[1]),this.events.dispatch(s.PersistenceBoundsSet,this.selectedPersistenceBounds),this.pointData.setActivePersistenceBounds(this.selectedPersistenceBounds)}))):console.error("Trying to add event listeners to non existing noUiSlider.")}}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class y extends u{constructor(...t){super(...t),m(this,"_element",void 0),m(this,"selectionBounds",void 0),m(this,"xStart",0),m(this,"xCurrent",0)}getElement(){return this._element}init(){this.createElement()}update(){}get element(){if(void 0===this._element)throw new Error("Selection Control element is undefined.");return this._element}get canvas(){return this.controlData.renderer.getCanvas()}createElement(){const t=document.createElement("div");t.hidden=!0,t.id=`persistence_selection_${this.id}`,t.classList.add("persistence_selection"),this.controlData.container.style.position="relative",Object.assign(t.style,{backgroundColor:"rgba(221,221,225,0.8)",border:"1px solid #ddf",width:"0",height:"0",mixBlendMode:"difference",willChange:"top, left, width, height",top:0,left:0,position:"absolute",zIndex:1,boxSizing:"border-box"}),this._element=t,this.addListener()}reCalculateSize(){const t=Math.min(this.xStart,this.xCurrent),e=Math.max(this.xStart,this.xCurrent),n=this.controlData.settings.canvasHeight-this.controlData.settings.getPadding("top")-this.controlData.settings.getPadding("bottom");this.element.style.left=`${t}px`,this.element.style.top=`${this.canvas.offsetTop+this.controlData.settings.getPadding("top")}px`,this.element.style.width=e-t+"px",this.element.style.height=`${n}px`}addListener(){this.canvas.addEventListener("mousedown",this.mouseDownListener.bind(this)),this.canvas.addEventListener("mousemove",this.mouseMoveListener.bind(this)),this.element.addEventListener("mousemove",this.mouseMoveListener.bind(this)),this.canvas.addEventListener("mouseup",this.mouseUpListener.bind(this)),this.element.addEventListener("mouseup",this.mouseUpListener.bind(this)),this.canvas.addEventListener("contextmenu",this.clearSelection.bind(this)),this.element.addEventListener("contextmenu",this.clearSelection.bind(this))}mouseDownListener(t){this.controlData.settings.selectionStopPropagation&&t.stopPropagation(),this.xStart=t.clientX-this.canvas.getBoundingClientRect().left,this.xStart<this.controlData.settings.getPadding("left")/2||(this.element.hidden=!1,this.events.dispatch(s.SelectionStart),this.reCalculateSize())}mouseMoveListener(t){this.events.dispatch(s.SelectionUpdating),this.xCurrent=t.clientX-this.canvas.getBoundingClientRect().left,this.reCalculateSize()}mouseUpListener(){this.calculateSelectionBounds(),this.element.hidden=!0,void 0!==this.selectionBounds&&this.selectionBounds.width<this.controlData.settings.selectionMinWidth||(this.pointData.setActiveSelectionBounds(this.selectionBounds),this.events.dispatch(s.SelectionEnd,this.selectionBounds))}clearSelection(t){t.preventDefault(),this.pointData.setActiveSelectionBounds(void 0),this.events.dispatch(s.SelectionCleared)}calculateSelectionBounds(){if(this.getElement().hidden)return void(this.selectionBounds=void 0);let t=Math.max(this.controlData.settings.getPadding("left"),this.element.getBoundingClientRect().left-this.canvas.getBoundingClientRect().left);const e=(t,e,n,i,r)=>(t-e)*(r-i)/(n-e)+i,n=this.element.getBoundingClientRect().left-this.canvas.getBoundingClientRect().left+this.element.getBoundingClientRect().width;let i=Math.max(0,Math.min(n,this.controlData.settings.canvasWidth-this.controlData.settings.getPadding("right")));const r=i-t,o=this.pointData.activeSelectionBounds.min!==Number.NEGATIVE_INFINITY?this.pointData.activeSelectionBounds.min:this.pointData.bounds[0],s=this.pointData.activeSelectionBounds.min!==Number.NEGATIVE_INFINITY?this.pointData.activeSelectionBounds.max:this.pointData.bounds[1];t=e(t,this.controlData.settings.getPadding("left"),this.controlData.settings.canvasWidth-this.controlData.settings.getPadding("right"),o,s),i=e(i,this.controlData.settings.getPadding("left"),this.controlData.settings.canvasWidth-this.controlData.settings.getPadding("right"),o,s),this.selectionBounds=new v(t,i,r)}}class b extends u{getElement(){return this.controlData.renderer.getCanvas()}init(){this.context.textAlign="left",this.context.textBaseline="middle"}get context(){return this.renderer.getContext()}get renderer(){return this.controlData.renderer}drawContainingLines(){this.context.strokeStyle=this.controlData.settings.axesColor,this.context.beginPath(),this.context.moveTo(this.controlData.settings.getPadding("left"),this.renderer.yPos(this.pointData.yMax())),this.context.lineTo(this.controlData.settings.getPadding("left"),this.renderer.yPos(0)),this.context.moveTo(this.controlData.settings.getPadding("left"),this.renderer.yPos(0)),this.context.lineTo(this.renderer.xPos(this.pointData.xMaxFiltered()),this.renderer.yPos(0)),this.context.stroke()}update(t){this.context.save(),this.context.fillStyle=this.controlData.settings.axesTextColor,this.pointData=t,this.drawContainingLines(),this.context.strokeStyle=this.controlData.settings.axesTickColor,this.xAxisTicks(),this.yAxisTicks(),this.context.restore()}xAxisTicks(){const t="number"==typeof this.controlData.settings.axesTickCount?this.controlData.settings.axesTickCount:this.controlData.settings.axesTickCount[0],e="number"==typeof this.controlData.settings.axesTickLength?this.controlData.settings.axesTickLength:this.controlData.settings.axesTickLength[0],n=this.pointData.xMinFiltered(),i=(this.pointData.xMaxFiltered()-n)/t;for(let r=0;r<=t;r+=1){let t=i*r+n,o=t.toFixed(this.controlData.settings.axesTickFractions);"function"==typeof this.controlData.settings.axesTickFormatter&&(o=this.controlData.settings.axesTickFormatter(t,Math.max(0,i*r-1+n)));const s=this.context.measureText(o);t=((t,e,n,i,r)=>(t-e)*(this.controlData.settings.canvasWidth-this.controlData.settings.getPadding("right")-i)/(n-e)+i)(t,this.pointData.xMinFiltered(),this.pointData.xMaxFiltered(),this.controlData.settings.getPadding("left")),this.context.beginPath(),this.context.moveTo(t,this.controlData.settings.canvasHeight-this.controlData.settings.getPadding("bottom")),this.context.lineTo(t,this.controlData.settings.canvasHeight-this.controlData.settings.getPadding("bottom")+e),this.context.fillText(o,t-s.width/2,this.controlData.settings.canvasHeight-this.controlData.settings.getPadding("bottom")+e+8),this.context.stroke(),this.context.fill()}}yAxisTicks(){const t="number"==typeof this.controlData.settings.axesTickCount?this.controlData.settings.axesTickCount:this.controlData.settings.axesTickCount[1],e="number"==typeof this.controlData.settings.axesTickLength?this.controlData.settings.axesTickLength:this.controlData.settings.axesTickLength[1];for(let n=0;n<=t;n+=1){const i=(this.pointData.yMax()-this.pointData.yMin())/t*n;let r=i.toFixed(this.controlData.settings.axesTickFractions);"function"==typeof this.controlData.settings.axesTickFormatter&&(r=this.controlData.settings.axesTickFormatter(i,0));const o=this.context.measureText(r);this.context.beginPath(),this.context.moveTo(this.controlData.settings.getPadding("left"),this.renderer.yPos(i)),this.context.lineTo(this.controlData.settings.getPadding("left")-e,this.renderer.yPos(i)),this.context.fillText(r,this.controlData.settings.getPadding("left")-e-o.width-2,this.renderer.yPos(i)),this.context.stroke(),this.context.fill()}}}const w={padding:{left:40,top:10,right:10,bottom:20},canvasWidth:500,canvasHeight:500,strokeStyle:"#000",chunks:100,waitTime:5,pointDrawFunction:void 0,enableSelectionFilter:!1,enablePersistenceFilter:!1,enableAxes:!0,axesColor:"#000",axesTickCount:5,axesTickLength:5,axesTickColor:"#000",axesTickFractions:2,axesTextColor:"#000",selectionStopPropagation:!1,selectionMinWidth:10,getPadding(t="left"){const{padding:e}=this;if("number"==typeof e)return e;if(void 0===e[t])throw new Error(`${t} does not exist on [left, top, right, bottom].`);return e[t]}};function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class D{constructor(t,e,n={}){if(P(this,"container",void 0),P(this,"id",void 0),P(this,"events",void 0),P(this,"settings",{}),P(this,"_renderer",void 0),P(this,"_points",void 0),P(this,"_pointChunks",void 0),P(this,"_bounds",void 0),P(this,"_persistenceBounds",void 0),P(this,"_activePersistenceBounds",void 0),P(this,"_activeSelectionBounds",void 0),P(this,"controlElements",void 0),P(this,"loader",void 0),"string"==typeof t){const e=document.querySelector(t);if(null===e)throw new Error(`Element with query selector ${t} not found.`);this.container=e}else{if(!(t instanceof HTMLElement))throw new Error("Container is neither a string nor an instance of HTMLElement.");this.container=t}this.id=e,Object.assign(this.settings,w,n),this.loader=new o,this.events=new a(this.container),this.controlElements=new Array,this.createControlElements()}setLoader(t){this.loader=t}async load(t){return this.loader.load(t).then((t=>{this._points=t.points,this._pointChunks=this.chunkPoints(t.points),this._bounds=t.bounds,this._persistenceBounds=t.persistenceBounds,this._activePersistenceBounds=void 0,this._activeSelectionBounds=void 0,this.events.dispatch(s.DataLoaded)}))}get renderer(){return this._renderer}update(){void 0!==this._points&&this.controlElements.forEach((t=>{t.update(this)}))}get points(){return void 0===this._points?[]:this._points}get pointChunks(){return void 0===this._pointChunks?[]:this._pointChunks}get bounds(){return void 0===this._bounds?[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY]:this._bounds}get persistenceBounds(){return void 0===this._persistenceBounds?new v(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY):this._persistenceBounds}get activePersistenceBounds(){return void 0===this._activePersistenceBounds?new v(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY):this._activePersistenceBounds}setActivePersistenceBounds(t){this._activePersistenceBounds=t,this.update()}get activeSelectionBounds(){return void 0===this._activeSelectionBounds?new v(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY):this._activeSelectionBounds}setActiveSelectionBounds(t){this._activeSelectionBounds=t,this.update()}xMin(){return this.bounds[0]}xMinFiltered(){return this.activeSelectionBounds.min!==Number.NEGATIVE_INFINITY?this.activeSelectionBounds.min:this.xMin()}xMax(){return this.bounds[1]}xMaxFiltered(){return this.activeSelectionBounds.min!==Number.NEGATIVE_INFINITY?this.activeSelectionBounds.max:this.xMax()}yMin(){return this.bounds[2]}yMax(){return this.bounds[3]}filteredPoints(){return void 0===this.points?[]:this.filterPersistence(this.filterSelection(this.points))}filteredPointsChunked(){return this.chunkPoints(this.filteredPoints())}createControlElements(){const t=new h(this);if(t.init(),this.container.appendChild(t.getElement()),this.controlElements.push(t),this._renderer=t,this.settings.enableSelectionFilter){const t=new y(this);t.init(),this.container.appendChild(t.getElement()),this.controlElements.push(t)}if(this.settings.enablePersistenceFilter){const t=new x(this);t.init(),this.container.appendChild(t.getElement()),this.controlElements.push(t)}if(this.settings.enableAxes){const t=new b(this);t.init(),this.controlElements.push(t)}}filterSelection(t){return void 0===this._renderer?t:t.filter((t=>t.lower.x>=this.activeSelectionBounds.min&&t.lower.x<=this.activeSelectionBounds.max))}filterPersistence(t){return t.filter((t=>t.persistence>=Number(this.activePersistenceBounds.min)&&t.persistence<=Number(this.activePersistenceBounds.max)))}chunkPoints(t){return t.reduce(((t,e,n)=>{const i=Math.floor(n/this.settings.chunks);return t[i]||(t[i]=[]),t[i].push(e),t}),[])}}})(),r.default})()}));